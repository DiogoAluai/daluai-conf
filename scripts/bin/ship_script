#!/bin/bash

#
# Copy provided script to $factoryBin folder, while being verbose about it, and removing '.sh' file extension.
#


# Usage: install_script path/to/script.sh
if [ $# -ne 1 ]; then
  echo "Usage: $(basename $0) <script>"
  echo -n "Number of arguments provided for install function were... "; red-echo "unreasonable"
  echo "Should've gotten one argument, instead got $#:"
  for arg in "$@"
  do
    echo -n "  $arg"
  done
  echo
  exit 1
fi

install_dir="$factoryBin/"
script_file="$1"
script_basename="$(basename $script_file)"
script_name_no_extension="${script_basename%.*}"

echo "Installing $script_file"
sudo chmod +x "$script_file"
sudo cp "$script_file" "$install_dir/$script_name_no_extension" || {
  red-echo "[Error] Could not copy, aborting install"
  exit 1
}

